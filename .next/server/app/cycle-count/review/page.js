(()=>{var e={};e.id=1789,e.ids=[1789],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5198:(e,r,s)=>{"use strict";s.r(r),s.d(r,{GlobalError:()=>i.a,__next_app__:()=>x,originalPathname:()=>m,pages:()=>o,routeModule:()=>h,tree:()=>c}),s(1794),s(1341),s(5866);var a=s(3191),t=s(8716),l=s(7922),i=s.n(l),d=s(5231),n={};for(let e in d)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>d[e]);s.d(r,n);let c=["",{children:["cycle-count",{children:["review",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,1794)),"/Users/priyadarshan.b/InvMgmt/src/app/cycle-count/review/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,1341)),"/Users/priyadarshan.b/InvMgmt/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,5866,23)),"next/dist/client/components/not-found-error"]}],o=["/Users/priyadarshan.b/InvMgmt/src/app/cycle-count/review/page.tsx"],m="/cycle-count/review/page",x={require:s,loadChunk:()=>Promise.resolve()},h=new a.AppPageRouteModule({definition:{kind:t.x.APP_PAGE,page:"/cycle-count/review/page",pathname:"/cycle-count/review",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},9379:(e,r,s)=>{Promise.resolve().then(s.bind(s,2295))},2295:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>c});var a=s(326),t=s(7577),l=s(9752),i=s(1664),d=s(1190),n=s(4794);function c(){let[e,r]=(0,t.useState)(null),[s,c]=(0,t.useState)("valid"),[o,m]=(0,t.useState)(!1),[x,h]=(0,t.useState)(""),p=(s,a,t)=>{e&&r(e=>{if(!e)return e;let r=[...e.errorRows];r[s]={...r[s],[a]:t};let l=r[s];return l.varianceCS=l.physicalQtyCS-l.systemQtyCS,l.varianceEA=l.physicalQtyEA-l.systemQtyEA,l.variancePercent=l.systemQtyCS>0?l.varianceCS/l.systemQtyCS*100:0,{...e,errorRows:r}})},u=async()=>{if(e){m(!0);try{let s=await fetch("/api/cycle-count/validate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({errorRows:e.errorRows})});if(s.ok){let e=await s.json();r(r=>r?{...r,errorRows:e.errorRows}:null),h("Errors revalidated successfully")}else h("Error revalidating errors")}catch(e){h("Error revalidating errors")}finally{m(!1)}}},y=async()=>{if(!e||e.errorRows.length>0){h("Please fix all errors before submitting");return}m(!0);try{(await fetch("/api/cycle-count/commit",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({validRows:e.validRows,totalAdjustments:e.totalAdjustments,totalSKUs:e.totalSKUs})})).ok?(h("Cycle count committed successfully"),setTimeout(()=>{window.location.href="/cycle-count/audit"},2e3)):h("Error committing cycle count")}catch(e){h("Error committing cycle count")}finally{m(!1)}};return e?(0,a.jsxs)("div",{className:"container mx-auto p-6",children:[a.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Review & Edit Cycle Count"}),x&&a.jsx("div",{className:`p-4 mb-4 rounded ${x.includes("Error")?"bg-red-100 text-red-700":"bg-green-100 text-green-700"}`,children:x}),(0,a.jsxs)("div",{className:"flex gap-2 mb-6",children:[(0,a.jsxs)(i.z,{onClick:()=>c("valid"),variant:"valid"===s?"default":"outline",children:["✓ Valid Rows (",e.validRows.length,")"]}),(0,a.jsxs)(i.z,{onClick:()=>c("error"),variant:"error"===s?"default":"outline",children:["⚠️ Error Rows (",e.errorRows.length,")"]})]}),"valid"===s&&(0,a.jsxs)(l.Zb,{children:[a.jsx(l.Ol,{children:a.jsx(l.ll,{children:"Valid Rows (Read-only)"})}),a.jsx(l.aY,{children:a.jsx("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full border-collapse border",children:[a.jsx("thead",{children:(0,a.jsxs)("tr",{className:"bg-gray-50",children:[a.jsx("th",{className:"border p-2",children:"SKU"}),a.jsx("th",{className:"border p-2",children:"System Qty CS"}),a.jsx("th",{className:"border p-2",children:"System Qty EA"}),a.jsx("th",{className:"border p-2",children:"Physical Qty CS"}),a.jsx("th",{className:"border p-2",children:"Physical Qty EA"}),a.jsx("th",{className:"border p-2",children:"Variance CS"}),a.jsx("th",{className:"border p-2",children:"Variance EA"}),a.jsx("th",{className:"border p-2",children:"Variance %"})]})}),a.jsx("tbody",{children:e.validRows.map((e,r)=>(0,a.jsxs)("tr",{className:e.varianceCS>0?"bg-green-50":e.varianceCS<0?"bg-red-50":"",children:[a.jsx("td",{className:"border p-2",children:e.sku}),a.jsx("td",{className:"border p-2",children:e.systemQtyCS}),a.jsx("td",{className:"border p-2",children:e.systemQtyEA}),a.jsx("td",{className:"border p-2",children:e.physicalQtyCS}),a.jsx("td",{className:"border p-2",children:e.physicalQtyEA}),a.jsx("td",{className:"border p-2",children:e.varianceCS}),a.jsx("td",{className:"border p-2",children:e.varianceEA}),(0,a.jsxs)("td",{className:"border p-2",children:[e.variancePercent.toFixed(2),"%"]})]},r))})]})})})]}),"error"===s&&(0,a.jsxs)(l.Zb,{children:[a.jsx(l.Ol,{children:a.jsx(l.ll,{children:"Error Rows (Editable)"})}),a.jsx(l.aY,{children:a.jsx("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full border-collapse border",children:[a.jsx("thead",{children:(0,a.jsxs)("tr",{className:"bg-gray-50",children:[a.jsx("th",{className:"border p-2",children:"SKU"}),a.jsx("th",{className:"border p-2",children:"System Qty CS"}),a.jsx("th",{className:"border p-2",children:"System Qty EA"}),a.jsx("th",{className:"border p-2",children:"Physical Qty CS"}),a.jsx("th",{className:"border p-2",children:"Physical Qty EA"}),a.jsx("th",{className:"border p-2",children:"Error"})]})}),a.jsx("tbody",{children:e.errorRows.map((e,r)=>(0,a.jsxs)("tr",{className:"bg-red-50",children:[a.jsx("td",{className:"border p-2",children:e.sku}),a.jsx("td",{className:"border p-2",children:e.systemQtyCS}),a.jsx("td",{className:"border p-2",children:e.systemQtyEA}),a.jsx("td",{className:"border p-2",children:a.jsx(d.I,{type:"number",min:"0",value:e.physicalQtyCS,onChange:e=>p(r,"physicalQtyCS",parseInt(e.target.value)||0)})}),a.jsx("td",{className:"border p-2",children:a.jsx(d.I,{type:"number",min:"0",max:"23",value:e.physicalQtyEA,onChange:e=>p(r,"physicalQtyEA",parseInt(e.target.value)||0)})}),a.jsx("td",{className:"border p-2 text-red-600 text-sm",children:e.errorMessage})]},r))})]})})})]}),(0,a.jsxs)("div",{className:"flex justify-between mt-6",children:[a.jsx(i.z,{onClick:u,disabled:o||0===e.errorRows.length,variant:"outline",children:"Re-Validate Errors"}),a.jsx(i.z,{onClick:y,disabled:o||e.errorRows.length>0,className:"bg-blue-600 hover:bg-blue-700",children:"Submit All Valid Rows"})]}),(0,a.jsxs)(l.Zb,{className:"mt-6",children:[a.jsx(l.Ol,{children:a.jsx(l.ll,{children:"Summary"})}),a.jsx(l.aY,{children:(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{children:[a.jsx(n._,{children:"Total SKUs"}),a.jsx("div",{className:"text-xl font-bold",children:e.totalSKUs})]}),(0,a.jsxs)("div",{children:[a.jsx(n._,{children:"Valid Rows"}),a.jsx("div",{className:"text-xl font-bold text-green-600",children:e.validRows.length})]}),(0,a.jsxs)("div",{children:[a.jsx(n._,{children:"Error Rows"}),a.jsx("div",{className:"text-xl font-bold text-red-600",children:e.errorRows.length})]})]})})]})]}):a.jsx("div",{className:"container mx-auto p-6",children:a.jsx("div",{className:"text-center",children:a.jsx("p",{children:"Loading cycle count data..."})})})}},9752:(e,r,s)=>{"use strict";s.d(r,{Ol:()=>d,SZ:()=>c,Zb:()=>i,aY:()=>o,ll:()=>n});var a=s(326),t=s(7577),l=s(1223);let i=t.forwardRef(({className:e,...r},s)=>a.jsx("div",{ref:s,className:(0,l.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...r}));i.displayName="Card";let d=t.forwardRef(({className:e,...r},s)=>a.jsx("div",{ref:s,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",e),...r}));d.displayName="CardHeader";let n=t.forwardRef(({className:e,...r},s)=>a.jsx("h3",{ref:s,className:(0,l.cn)("text-2xl font-semibold leading-none tracking-tight",e),...r}));n.displayName="CardTitle";let c=t.forwardRef(({className:e,...r},s)=>a.jsx("p",{ref:s,className:(0,l.cn)("text-sm text-muted-foreground",e),...r}));c.displayName="CardDescription";let o=t.forwardRef(({className:e,...r},s)=>a.jsx("div",{ref:s,className:(0,l.cn)("p-6 pt-0",e),...r}));o.displayName="CardContent",t.forwardRef(({className:e,...r},s)=>a.jsx("div",{ref:s,className:(0,l.cn)("flex items-center p-6 pt-0",e),...r})).displayName="CardFooter"},1190:(e,r,s)=>{"use strict";s.d(r,{I:()=>i});var a=s(326),t=s(7577),l=s(1223);let i=t.forwardRef(({className:e,type:r,...s},t)=>a.jsx("input",{type:r,className:(0,l.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:t,...s}));i.displayName="Input"},4794:(e,r,s)=>{"use strict";s.d(r,{_:()=>i});var a=s(326),t=s(7577),l=s(1223);let i=t.forwardRef(({className:e,...r},s)=>a.jsx("label",{ref:s,className:(0,l.cn)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",e),...r}));i.displayName="Label"},1794:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>a});let a=(0,s(8570).createProxy)(String.raw`/Users/priyadarshan.b/InvMgmt/src/app/cycle-count/review/page.tsx#default`)}};var r=require("../../../webpack-runtime.js");r.C(e);var s=e=>r(r.s=e),a=r.X(0,[9276,3926,8752],()=>s(5198));module.exports=a})();