(()=>{var e={};e.id=7672,e.ids=[7672],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},9007:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>l.a,__next_app__:()=>x,originalPathname:()=>p,pages:()=>c,routeModule:()=>h,tree:()=>o}),r(5245),r(1341),r(5866);var a=r(3191),s=r(8716),n=r(7922),l=r.n(n),i=r(5231),d={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>i[e]);r.d(t,d);let o=["",{children:["reports",{children:["inventory",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,5245)),"/Users/priyadarshan.b/InvMgmt/src/app/reports/inventory/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,1341)),"/Users/priyadarshan.b/InvMgmt/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,5866,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/priyadarshan.b/InvMgmt/src/app/reports/inventory/page.tsx"],p="/reports/inventory/page",x={require:r,loadChunk:()=>Promise.resolve()},h=new a.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/reports/inventory/page",pathname:"/reports/inventory",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},1046:(e,t,r)=>{Promise.resolve().then(r.bind(r,3831))},3831:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>o});var a=r(326),s=r(7577),n=r(9752),l=r(1664),i=r(1190),d=r(4794);function o(){let[e,t]=(0,s.useState)({startDate:new Date(Date.now()-2592e6).toISOString().split("T")[0],endDate:new Date().toISOString().split("T")[0],sku:"",batch:""}),[r,o]=(0,s.useState)([]),[c,p]=(0,s.useState)(!1),[x,h]=(0,s.useState)(1),[m,u]=(0,s.useState)(50),[f,j]=(0,s.useState)(0),g=async()=>{p(!0);try{let t=new URLSearchParams({startDate:e.startDate,endDate:e.endDate,sku:e.sku,batch:e.batch,page:x.toString(),pageSize:m.toString()}),r=await fetch(`/api/reports/inventory?${t}`);if(r.ok){let e=await r.json();o(e.items),j(e.total)}}catch(e){console.error("Error fetching report data:",e)}finally{p(!1)}},b=async()=>{p(!0);try{let t=new URLSearchParams({startDate:e.startDate,endDate:e.endDate,sku:e.sku,batch:e.batch}),r=await fetch(`/api/reports/inventory/export?${t}`);if(r.ok){let t=await r.blob(),a=window.URL.createObjectURL(t),s=document.createElement("a");s.href=a,s.download=`inventory_report_${e.startDate}_${e.endDate}.csv`,document.body.appendChild(s),s.click(),window.URL.revokeObjectURL(a),document.body.removeChild(s)}}catch(e){console.error("Error exporting CSV:",e)}finally{p(!1)}},v=Math.ceil(f/m);return(0,a.jsxs)("div",{className:"container mx-auto p-6",children:[a.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Inventory Report"}),(0,a.jsxs)(n.Zb,{className:"mb-6",children:[a.jsx(n.Ol,{children:a.jsx(n.ll,{children:"Filters"})}),(0,a.jsxs)(n.aY,{children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,a.jsxs)("div",{children:[a.jsx(d._,{htmlFor:"startDate",children:"Start Date"}),a.jsx(i.I,{id:"startDate",type:"date",value:e.startDate,onChange:e=>t(t=>({...t,startDate:e.target.value}))})]}),(0,a.jsxs)("div",{children:[a.jsx(d._,{htmlFor:"endDate",children:"End Date"}),a.jsx(i.I,{id:"endDate",type:"date",value:e.endDate,onChange:e=>t(t=>({...t,endDate:e.target.value}))})]}),(0,a.jsxs)("div",{children:[a.jsx(d._,{htmlFor:"sku",children:"SKU Code"}),a.jsx(i.I,{id:"sku",value:e.sku,onChange:e=>t(t=>({...t,sku:e.target.value})),placeholder:"Optional"})]}),(0,a.jsxs)("div",{children:[a.jsx(d._,{htmlFor:"batch",children:"Batch"}),a.jsx(i.I,{id:"batch",value:e.batch,onChange:e=>t(t=>({...t,batch:e.target.value})),placeholder:"Optional"})]})]}),(0,a.jsxs)("div",{className:"flex gap-2 mt-4",children:[a.jsx(l.z,{onClick:()=>{h(1),g()},disabled:c,variant:"jiomart",children:"Apply Filters"}),a.jsx(l.z,{onClick:()=>{t({startDate:new Date(Date.now()-2592e6).toISOString().split("T")[0],endDate:new Date().toISOString().split("T")[0],sku:"",batch:""}),h(1)},variant:"outline",children:"Reset"})]})]})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("div",{children:(0,a.jsxs)("span",{className:"text-sm text-gray-600",children:["Showing ",(x-1)*m+1," to ",Math.min(x*m,f)," of ",f," items"]})}),a.jsx(l.z,{onClick:b,disabled:c,variant:"jiomart",children:"Export CSV (Full Result)"})]}),(0,a.jsxs)(n.Zb,{children:[a.jsx(n.Ol,{children:a.jsx(n.ll,{children:"Inventory Movement Report"})}),a.jsx(n.aY,{children:c?a.jsx("div",{className:"text-center py-8",children:a.jsx("p",{children:"Loading report data..."})}):a.jsx("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full border-collapse border",children:[a.jsx("thead",{children:(0,a.jsxs)("tr",{className:"bg-gray-50",children:[a.jsx("th",{className:"border p-2 text-left",children:"SKU"}),a.jsx("th",{className:"border p-2 text-left",children:"Batch"}),a.jsx("th",{className:"border p-2 text-left",children:"Opening Qty (CS/EA)"}),a.jsx("th",{className:"border p-2 text-left",children:"Inward (CS/EA)"}),a.jsx("th",{className:"border p-2 text-left",children:"Outward (CS/EA)"}),a.jsx("th",{className:"border p-2 text-left",children:"Adjustments (CS/EA)"}),a.jsx("th",{className:"border p-2 text-left",children:"Closing Qty (CS/EA)"})]})}),(0,a.jsxs)("tbody",{children:[r.map((e,t)=>(0,a.jsxs)("tr",{children:[a.jsx("td",{className:"border p-2",children:e.sku}),a.jsx("td",{className:"border p-2",children:e.batch||"â€”"}),(0,a.jsxs)("td",{className:"border p-2",children:[e.openingQtyCS,"/",e.openingQtyEA]}),(0,a.jsxs)("td",{className:"border p-2",children:[e.inwardCS,"/",e.inwardEA]}),(0,a.jsxs)("td",{className:"border p-2",children:[e.outwardCS,"/",e.outwardEA]}),(0,a.jsxs)("td",{className:"border p-2",children:[e.adjustmentsCS,"/",e.adjustmentsEA]}),(0,a.jsxs)("td",{className:"border p-2",children:[e.closingQtyCS,"/",e.closingQtyEA]})]},t)),0===r.length&&a.jsx("tr",{children:a.jsx("td",{colSpan:7,className:"border p-4 text-center text-gray-500",children:"No data found for the selected filters"})})]})]})})})]}),v>1&&(0,a.jsxs)("div",{className:"flex justify-between items-center mt-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx(d._,{htmlFor:"pageSize",children:"Page Size:"}),(0,a.jsxs)("select",{id:"pageSize",value:m,onChange:e=>u(parseInt(e.target.value)),className:"border rounded p-1",children:[a.jsx("option",{value:25,children:"25"}),a.jsx("option",{value:50,children:"50"}),a.jsx("option",{value:100,children:"100"})]})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[a.jsx(l.z,{onClick:()=>h(e=>Math.max(1,e-1)),disabled:1===x,variant:"outline",size:"sm",children:"Previous"}),(0,a.jsxs)("span",{className:"px-3 py-1 text-sm",children:["Page ",x," of ",v]}),a.jsx(l.z,{onClick:()=>h(e=>Math.min(v,e+1)),disabled:x===v,variant:"outline",size:"sm",children:"Next"})]})]})]})}},9752:(e,t,r)=>{"use strict";r.d(t,{Ol:()=>i,SZ:()=>o,Zb:()=>l,aY:()=>c,ll:()=>d});var a=r(326),s=r(7577),n=r(1223);let l=s.forwardRef(({className:e,...t},r)=>a.jsx("div",{ref:r,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));l.displayName="Card";let i=s.forwardRef(({className:e,...t},r)=>a.jsx("div",{ref:r,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",e),...t}));i.displayName="CardHeader";let d=s.forwardRef(({className:e,...t},r)=>a.jsx("h3",{ref:r,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",e),...t}));d.displayName="CardTitle";let o=s.forwardRef(({className:e,...t},r)=>a.jsx("p",{ref:r,className:(0,n.cn)("text-sm text-muted-foreground",e),...t}));o.displayName="CardDescription";let c=s.forwardRef(({className:e,...t},r)=>a.jsx("div",{ref:r,className:(0,n.cn)("p-6 pt-0",e),...t}));c.displayName="CardContent",s.forwardRef(({className:e,...t},r)=>a.jsx("div",{ref:r,className:(0,n.cn)("flex items-center p-6 pt-0",e),...t})).displayName="CardFooter"},1190:(e,t,r)=>{"use strict";r.d(t,{I:()=>l});var a=r(326),s=r(7577),n=r(1223);let l=s.forwardRef(({className:e,type:t,...r},s)=>a.jsx("input",{type:t,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:s,...r}));l.displayName="Input"},4794:(e,t,r)=>{"use strict";r.d(t,{_:()=>l});var a=r(326),s=r(7577),n=r(1223);let l=s.forwardRef(({className:e,...t},r)=>a.jsx("label",{ref:r,className:(0,n.cn)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",e),...t}));l.displayName="Label"},5245:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});let a=(0,r(8570).createProxy)(String.raw`/Users/priyadarshan.b/InvMgmt/src/app/reports/inventory/page.tsx#default`)}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[9276,3926,8752],()=>r(9007));module.exports=a})();